System.register("chunks:///_virtual/audio-manager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){"use strict";var t,o,e,n,r,a,u,l,c;return{setters:[function(i){t=i.applyDecoratedDescriptor,o=i.inheritsLoose,e=i.initializerDefineProperty,n=i.assertThisInitialized},function(i){r=i.cclegacy,a=i._decorator,u=i.AudioClip,l=i.AudioSource,c=i.Component}],execute:function(){var p,s,d,f,h,g,y;r._RF.push({},"52ff6Qg0MlJaaUpLNS1HPTJ","audio-manager",void 0);var m=a.ccclass,b=a.property;i("AudioManager",(p=m("AudioManager"),s=b(u),d=b(u),p((g=t((h=function(i){function t(){for(var t,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return t=i.call.apply(i,[this].concat(r))||this,e(t,"bg",g,n(t)),e(t,"click",y,n(t)),t.audioComp=null,t}o(t,i);var r=t.prototype;return r.start=function(){this.audioComp=this.getComponent(l)},r.playSound=function(i){void 0===i&&(i=!0),i?(this.audioComp.clip=this.bg,this.audioComp.play()):this.audioComp.stop()},r.playClip=function(){this.audioComp.playOneShot(this.click)},t}(c)).prototype,"bg",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=t(h.prototype,"click",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=h))||f));r._RF.pop()}}}));

System.register("chunks:///_virtual/ball.ts",["./rollupPluginModLoBabelHelpers.js","cc","./constants.ts","./utils.ts","./pool-manager.ts"],(function(t){"use strict";var i,e,o,r,s,a,n,h,u,c,P,d,_,m,p,A,S,l,T;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){s=t.cclegacy,a=t._decorator,n=t.Vec3,h=t.Prefab,u=t.Node,c=t.ParticleUtils,P=t.find,d=t.Camera,_=t.Label,m=t.Animation,p=t.ParticleSystem,A=t.Component},function(t){S=t.Constants},function(t){l=t.utils},function(t){T=t.PoolManager}],execute:function(){var E,B,R,L,f,M,g,O,N;s._RF.push({},"900c8pQ81tCcrbRdvi9SxTB","ball",void 0);var D=a.ccclass,v=a.property,J=new n;t("Ball",(E=D("Ball"),B=v(h),R=v({type:h}),L=v({type:h}),E((g=i((M=function(t){function i(){for(var i,e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];return i=t.call.apply(t,[this].concat(s))||this,o(i,"diamondParticlePrefab",g,r(i)),o(i,"scoreAniPrefab",O,r(i)),o(i,"trail02Prefab",N,r(i)),i.currBoard=null,i.boardCount=0,i.jumpState=S.BALL_JUMP_STATE.JUMPUP,i.currBoardIdx=0,i.diffLevel=1,i.currJumpFrame=0,i.hasSprint=!1,i.isTouch=!1,i.touchPosX=0,i.movePosX=0,i.isJumpSpring=!1,i.boardGroupCount=0,i.trailNode=null,i.timeScale=0,i._wPos=new n,i}e(i,t);var s=i.prototype;return s.start=function(){S.game.node.on(u.EventType.TOUCH_START,this.onTouchStart,this),S.game.node.on(u.EventType.TOUCH_END,this.onTouchEnd,this),S.game.node.on(u.EventType.TOUCH_MOVE,this.onTouchMove,this),S.game.node.on(S.GAME_EVENT.RESTART,this.gameStart,this),this.updateBall(),this.reset()},s.onDestroy=function(){S.game.node.off(u.EventType.TOUCH_START,this.onTouchStart,this),S.game.node.off(u.EventType.TOUCH_END,this.onTouchEnd,this),S.game.node.off(u.EventType.TOUCH_MOVE,this.onTouchMove,this),S.game.node.off(S.GAME_EVENT.RESTART,this.gameStart,this)},s.update=function(t){if(this.timeScale=Math.floor(t/S.normalDt*100)/100,S.game.state===S.GAME_STATE.PLAYING){var i=S.game.boardManager,e=i.getBoardList();if(this.jumpState===S.BALL_JUMP_STATE.SPRINT){this.currJumpFrame>S.BALL_JUMP_FRAMES_SPRINT&&(this.jumpState=S.BALL_JUMP_STATE.JUMPUP,this.isJumpSpring=!1,this.currJumpFrame=0,this.hasSprint=!1,i.clearDiamond()),this.currJumpFrame+=this.timeScale;for(var o=i.getDiamondSprintList(),r=0;r<S.DIAMOND_NUM;r++)Math.abs(this.node.position.y-o[r].position.y)<=S.DIAMOND_SPRINT_SCORE_AREA&&Math.abs(this.node.position.x-o[r].position.x)<=S.DIAMOND_SPRINT_SCORE_AREA&&(S.game.addScore(S.DIAMOND_SCORE),this.showScore(S.DIAMOND_SCORE),S.game.ball.playDiamondParticle(this.node.position),o[r].active=!1);this.setPosY(),this.setPosX(),this.touchPosX=this.movePosX;var s=this.node.position.y+S.CAMERA_OFFSET_Y_SPRINT;S.game.cameraCtrl.setOriginPosY(s)}else{for(var a=this.currBoardIdx+1;a>=0;a--){var n=e[a],h=this.node.position,u=e[a].node.position;if(Math.abs(h.x-u.x)<=e[a].getRadius()&&Math.abs(h.y-(u.y+S.BOARD_HEIGTH))<=S.DIAMOND_SCORE_AREA&&e[a].checkDiamond(h.x),this.jumpState===S.BALL_JUMP_STATE.FALLDOWN){if(this.currJumpFrame>S.PLAYER_MAX_DOWN_FRAMES||this.currBoard.node.position.y-h.y-(S.BOARD_GAP+S.BOARD_HEIGTH)>.001)return c.stop(this.trailNode),void S.game.gameDie();if(this.isOnBoard(n)){this.currBoard=n,this.currBoardIdx=a,this.activeCurrBoard();break}}}this.currJumpFrame+=this.timeScale,this.jumpState===S.BALL_JUMP_STATE.JUMPUP&&(this.isJumpSpring&&this.currJumpFrame>=S.BALL_JUMP_FRAMES_SPRING||!this.isJumpSpring&&this.currJumpFrame>=S.BALL_JUMP_FRAMES)&&(this.jumpState=S.BALL_JUMP_STATE.FALLDOWN,this.currJumpFrame=0),this.setPosY(),this.setPosX(),this.currBoard.type!==S.BOARD_TYPE.SPRINT&&S.game.cameraCtrl.setOriginPosX(this.node.position.x),this.touchPosX=this.movePosX}this.setTrailPos()}},s.onTouchStart=function(t,i){this.isTouch=!0,this.touchPosX=t.getLocation().x,this.movePosX=this.touchPosX},s.onTouchMove=function(t,i){this.movePosX=t.getLocation().x},s.onTouchEnd=function(t,i){this.isTouch=!1},s.gameStart=function(){this.playTrail()},s.reset=function(){this.boardCount=0,this.diffLevel=1,J.set(S.BOARD_INIT_POS),J.y+=S.BALL_RADIUS+S.BOARD_HEIGTH/2-.001,this.node.setPosition(J),this.node.eulerAngles=new n,this.currJumpFrame=0,this.jumpState=S.BALL_JUMP_STATE.FALLDOWN,this.hasSprint=!1,this.currBoardIdx=0,this.show(),this.setTrailPos()},s.updateBall=function(){this.trailNode=T.instance.getNode(this.trail02Prefab,this.node.parent)},s.show=function(){this.node.active=!0},s.hide=function(){this.node.active=!1},s.activeCurrBoard=function(){var t=this.node.position,i=this.currBoard.node.position,e=this.currBoard.type,o=i.y+S.BALL_RADIUS+this.currBoard.getHeight()/2-.01;if(this.node.setPosition(t.x,o,t.z),this.currJumpFrame=0,e===S.BOARD_TYPE.SPRINT?(this.jumpState=S.BALL_JUMP_STATE.SPRINT,S.game.cameraCtrl.setOriginPosX(i.x)):this.jumpState=S.BALL_JUMP_STATE.JUMPUP,!this.currBoard.isActive){this.currBoard.isActive=!0;var r=S.SCORE_BOARD_NOT_CENTER;(e!==S.BOARD_TYPE.NORMAL&&e!==S.BOARD_TYPE.DROP||Math.abs(t.x-i.x)<=S.BOARD_RADIUS_CENTER)&&(r=S.SCORE_BOARD_CENTER),S.game.addScore(r),this.showScore(r),this.boardCount++,5===this.boardCount&&S.game.node.emit(S.GAME_EVENT.HIDETIPS),this.diffLevel+=r/2;for(var s=this.currBoardIdx-S.BOARD_NEW_INDEX;s>0;s--)this.newBoard()}this.isJumpSpring=e===S.BOARD_TYPE.SPRING,this.currBoard.setBump(),this.currBoard.setWave(),e!=S.BOARD_TYPE.SPRING&&e!=S.BOARD_TYPE.SPRINT||this.currBoard.setSpring();var a=S.game.boardManager.getBoardList();if(e===S.BOARD_TYPE.DROP)for(var n=0;n<this.currBoardIdx;n++)a[n].setDrop();var h=i.y+S.CAMERA_OFFSET_Y;S.game.cameraCtrl.setOriginPosY(h),S.game.cameraCtrl.preType=e},s.newBoard=function(){var t=S.BOARD_TYPE.NORMAL;if(this.boardGroupCount<=0){var i=l.getDiffCoeff(this.diffLevel,1,10),e=Math.random()*i;e<4.2?(t=S.BOARD_TYPE.NORMAL,this.boardGroupCount=2):e<=5.5?(t=S.BOARD_TYPE.GIANT,this.boardGroupCount=3):e<=6.2?(t=S.BOARD_TYPE.SPRING,Math.random()>.5&&(this.boardGroupCount=2)):e<=7?(t=S.BOARD_TYPE.DROP,this.boardGroupCount=3):e<=7.5&&!1===this.hasSprint?(t=S.BOARD_TYPE.SPRINT,this.hasSprint=!0):t=S.BOARD_TYPE.NORMAL}this.boardGroupCount--,S.game.boardManager.newBoard(t,this.diffLevel)},s.showScore=function(t){var i=T.instance.getNode(this.scoreAniPrefab,P("Canvas/resultUI")),e=new n,o=S.game.cameraCtrl.node.getComponent(d);this._wPos.set(this.node.worldPosition),o.convertToUINode(this._wPos,P("Canvas/resultUI"),e),e.x+=50,i.setPosition(e),i.getComponentInChildren(_).string="+"+t;var r=i.getComponent(m);r.once(m.EventType.FINISHED,(function(){T.instance.putNode(i)})),r.play()},s.setPosX=function(){if(this.isTouch&&this.touchPosX!==this.movePosX)if(J.set(this.node.position),this.jumpState===S.BALL_JUMP_STATE.SPRINT){var t=(this.movePosX-this.touchPosX)*S.COEFF_POS_BALL;this.node.setPosition(J.x+t,J.y,J.z),J.set(this.node.position),t=J.x;var i=1.3*S.SCENE_MAX_OFFSET_X,e=this.currBoard.node.position;t>e.x+i?this.node.setPosition(e.x+i,J.y,J.z):t<this.currBoard.node.position.x-i&&this.node.setPosition(e.x-i,J.y,J.z)}else{var o=(this.movePosX-this.touchPosX)*S.COEFF_POS_BALL;this.node.setPosition(J.x+o,J.y,J.z)}},s.setPosY=function(){if(J.set(this.node.position),this.jumpState===S.BALL_JUMP_STATE.JUMPUP)this.isJumpSpring?J.y+=S.BALL_JUMP_STEP_SPRING[Math.floor(this.currJumpFrame/3)]*this.timeScale:J.y+=S.BALL_JUMP_STEP[Math.floor(this.currJumpFrame/2)]*this.timeScale,this.node.setPosition(J);else if(this.jumpState===S.BALL_JUMP_STATE.FALLDOWN){if(this.currBoard.type===S.BOARD_TYPE.SPRING)if(this.currJumpFrame<S.BALL_JUMP_FRAMES_SPRING){var t=S.BALL_JUMP_FRAMES_SPRING-this.currJumpFrame-1;J.y-=S.BALL_JUMP_STEP_SPRING[Math.floor((t>=0?t:0)/3)]*this.timeScale}else J.y-=S.BALL_JUMP_STEP_SPRING[0]*this.timeScale;else if(this.currJumpFrame<S.BALL_JUMP_FRAMES){var i=S.BALL_JUMP_FRAMES-this.currJumpFrame-1;J.y-=S.BALL_JUMP_STEP[Math.floor((i>=0?i:0)/2)]*this.timeScale}else J.y-=S.BALL_JUMP_STEP[0]*this.timeScale;this.node.setPosition(J)}else this.jumpState===S.BALL_JUMP_STATE.SPRINT&&(J.y+=S.BALL_JUMP_STEP_SPRINT*this.timeScale,this.node.setPosition(J),this.currJumpFrame>=S.DIAMOND_START_FRAME+20&&this.currJumpFrame<=S.BALL_JUMP_FRAMES_SPRINT-50&&Math.floor(this.currJumpFrame)%Math.floor(S.DIAMOND_SPRINT_STEP_Y/S.BALL_JUMP_STEP_SPRINT)==0&&S.game.boardManager.newDiamond())},s.isOnBoard=function(t){var i=this.node.position,e=t.node.position,o=Math.abs(i.x-e.x),r=i.y-e.y;if(o<=t.getRadius()){if(r>=0&&r<=S.BALL_RADIUS+t.getHeight()/2)return!0;if(this.isJumpSpring&&this.currJumpFrame>=S.BALL_JUMP_FRAMES_SPRING){if(Math.abs(r)<S.BALL_JUMP_STEP_SPRING[0])return!0}else if(!this.isJumpSpring&&this.currJumpFrame>=S.BALL_JUMP_FRAMES&&Math.abs(r)<S.BALL_JUMP_STEP[0])return!0}return!1},s.revive=function(){this.currBoardIdx--,this.currBoard.type===S.BOARD_TYPE.SPRINT&&(this.currBoardIdx++,this.currBoard=S.game.boardManager.getBoardList()[this.currBoardIdx]),this.currBoard.revive();var t=this.currBoard.node.position.clone();t.y+=S.BALL_RADIUS+this.currBoard.getHeight()/2-.001,this.node.setPosition(t),this.node.eulerAngles=new n(0,0,0),this.currJumpFrame=0,this.show();var i=this.currBoard.node.position.y+S.CAMERA_OFFSET_Y;S.game.cameraCtrl.setOriginPosX(t.x),S.game.cameraCtrl.setOriginPosY(i),this.playTrail(),this.setTrailPos()},s.playDiamondParticle=function(t){var i=this,e=T.instance.getNode(this.diamondParticlePrefab,this.node.parent);e.setPosition(t);var o=e.getComponent(p);o.play();this.schedule((function t(){o.isPlaying||(T.instance.putNode(e),i.unschedule(t))}),.1)},s.playTrail=function(){c.play(this.trailNode)},s.setTrailPos=function(){var t=this.node.position;this.trailNode.setPosition(t.x,t.y-.1,t.z)},i}(A)).prototype,"diamondParticlePrefab",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=i(M.prototype,"scoreAniPrefab",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=i(M.prototype,"trail02Prefab",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=M))||f));s._RF.pop()}}}));

System.register("chunks:///_virtual/board-manager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./constants.ts","./utils.ts"],(function(t){"use strict";var i,n,o,r,a,e,s,d,_,h,c,u;return{setters:[function(t){i=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){a=t.cclegacy,e=t._decorator,s=t.Vec3,d=t.Prefab,_=t.instantiate,h=t.Component},function(t){c=t.Constants},function(t){u=t.utils}],execute:function(){var f,m,p,D,S,l,b;a._RF.push({},"2a0a0QivvtEZodpOZ79qMFb","board-manager",void 0);var N=e.ccclass,P=e.property,A=new s,I=new s;t("BoardManager",(f=N("BoardManager"),m=P(d),p=P(d),f((l=i((S=function(t){function i(){for(var i,n=arguments.length,a=new Array(n),e=0;e<n;e++)a[e]=arguments[e];return i=t.call.apply(t,[this].concat(a))||this,o(i,"boardPrefab",l,r(i)),o(i,"diamondPrefab",b,r(i)),i.diamondSprintList=[],i.diamondCenterX=0,i._boardList=[],i._boardInsIdx=0,i}n(i,t);var a=i.prototype;return a.start=function(){this.initBoard(),this.initDiamond()},a.reset=function(){this._boardInsIdx=0,c.game.initFirstBoard=!1;for(var t,i=c.BOARD_INIT_POS.clone(),n=c.BOARD_TYPE.NORMAL,o=0;o<c.BOARD_NUM;o++)(t=this._boardList[o]).reset(n,i,1),i=this.getNextPos(t,1);if((t=this._boardList[0]).isActive=!0,c.game.ball.currBoard=t,this.diamondSprintList[0])for(var r=0;r<c.DIAMOND_NUM;r++)this.diamondSprintList[r].active=!1},a.initBoard=function(){for(var t=0;t<c.BOARD_NUM;t++){var i=_(this.boardPrefab);i.name=this._boardInsIdx.toString(),this._boardInsIdx++,this.node.addChild(i);var n=i.getComponent("Board");this._boardList.push(n)}this.reset()},a.newBoard=function(t,i){var n=this._boardList[c.BOARD_NUM-1],o=this.getNextPos(n,i,A),r=this._boardList.shift();t===c.BOARD_TYPE.SPRINT?(this.diamondCenterX=o.x,this.setDiamond(o),r.reset(t,o,0)):r.reset(t,o,i),r.name=this._boardInsIdx.toString(),this._boardInsIdx++,this._boardList.push(r)},a.getNextPos=function(t,i,n){var o=n?n.set(t.node.position):t.node.position.clone(),r=u.getDiffCoeff(i,1,2);return o.x=(Math.random()-.5)*c.SCENE_MAX_OFFSET_X*r,t.type===c.BOARD_TYPE.SPRINT&&(o.y+=c.BOARD_GAP_SPRINT,o.x=t.node.position.x),t.type===c.BOARD_TYPE.SPRING?o.y+=c.BOARD_GAP_SPRING:o.y+=c.BOARD_GAP,o},a.initDiamond=function(){for(var t=0;t<c.DIAMOND_NUM;t++)this.diamondSprintList[t]=_(this.diamondPrefab),this.node.addChild(this.diamondSprintList[t]),this.diamondSprintList[t].active=!1},a.setDiamond=function(t){var i=t.clone();i.y+=c.BALL_JUMP_STEP_SPRINT*c.DIAMOND_START_FRAME;for(var n=0;n<c.DIAMOND_NUM;n++)this.setNextDiamondPos(i),this.diamondSprintList[n].setPosition(i),this.diamondSprintList[n].active=!0},a.newDiamond=function(){I.set(this.diamondSprintList[c.DIAMOND_NUM-1].position),this.setNextDiamondPos(I);var t=this.diamondSprintList.shift();t.setPosition(I),t.active=!0,this.diamondSprintList.push(t)},a.clearDiamond=function(){for(var t=0;t<c.DIAMOND_NUM;t++)this.diamondSprintList[t].active=!1},a.setNextDiamondPos=function(t){t.y+=c.DIAMOND_SPRINT_STEP_Y,t.x+=1.5*(Math.random()-.5),t.x>this.diamondCenterX+c.SCENE_MAX_OFFSET_X?t.x=this.diamondCenterX+c.SCENE_MAX_OFFSET_X:t.x<this.diamondCenterX-c.SCENE_MAX_OFFSET_X&&(t.x=this.diamondCenterX-c.SCENE_MAX_OFFSET_X)},a.getBoardList=function(){return this._boardList},a.getDiamondSprintList=function(){return this.diamondSprintList},i}(h)).prototype,"boardPrefab",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=i(S.prototype,"diamondPrefab",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=S))||D));a._RF.pop()}}}));

System.register("chunks:///_virtual/board.ts",["./rollupPluginModLoBabelHelpers.js","cc","./constants.ts","./utils.ts"],(function(i){"use strict";var t,e,s,n,r,o,a,h,p,c,l,d,R,g;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.inheritsLoose,s=i.initializerDefineProperty,n=i.assertThisInitialized},function(i){r=i.cclegacy,o=i._decorator,a=i.Vec3,h=i.Prefab,p=i.instantiate,c=i.MeshRenderer,l=i.Color,d=i.Component},function(i){R=i.Constants},function(i){g=i.utils}],execute:function(){var _,v,P,u,f,D,S,A,m,E,O,T,B;r._RF.push({},"bb50aLcTl1FbpB7Hy0H/DT9","board",void 0);var I=o.ccclass,y=o.property,F=new a;i("Board",(_=I("Board"),v=y(h),P=y({type:h}),u=y({type:h}),f=y({type:h}),D=y({type:h}),_((m=t((A=function(i){function t(){for(var t,e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return t=i.call.apply(i,[this].concat(r))||this,s(t,"diamondPrefab",m,n(t)),s(t,"centerPrefab",E,n(t)),s(t,"wavePrefab",O,n(t)),s(t,"springTopPrefab",T,n(t)),s(t,"springHelixPrefab",B,n(t)),t.isActive=!1,t.diamondList=[],t.type=R.BOARD_TYPE.NORMAL,t.wave=null,t.waveInner=null,t.waveOriginScale=new a,t.currWaveFrame=0,t.currSpringFrame=0,t.currBumpFrame=R.BOARD_BUMP_FRAMES,t.springTop=null,t.springHelix=null,t.springHelixOriginScale=new a,t.center=null,t.isMovingRight=!0,t.hasDiamond=!1,t.isMoving=!1,t.posBeforeDrop=new a,t.originScale=new a,t.currDropFrame=R.BOARD_DROP_FRAMES,t._game=null,t}e(t,i);var r=t.prototype;return r.onLoad=function(){this.originScale.set(this.node.scale),this.initCenter(),this.initWave(),this.initSpring(),this.initDiamond()},r.update=function(){this.effectBump(),this.effectWave(),this.type!==R.BOARD_TYPE.SPRING&&this.type!==R.BOARD_TYPE.SPRINT||this.effectSpring(),this.effectDrop(),this.effectMove(),this.hasDiamond&&this.effectDiamondRotate()},r.reset=function(i,t,e){if(this.isActive=!1,this.type=i,this.node.setPosition(t),this.isMoving=!1,this.currDropFrame=R.BOARD_DROP_FRAMES,this.type!==R.BOARD_TYPE.NORMAL&&this.type!==R.BOARD_TYPE.DROP&&this.type!==R.BOARD_TYPE.SPRING||(this.isMoving=this.setMove(e)),this.type===R.BOARD_TYPE.GIANT?this.node.setScale(this.originScale.x*R.BOARD_SCALE_GIANT,this.originScale.y,this.originScale.z):this.type===R.BOARD_TYPE.DROP?(this.node.setScale(this.originScale.x,this.originScale.y*R.BOARD_HEIGTH_SCALE_DROP,this.originScale.z),this.posBeforeDrop.set(this.node.position)):this.node.setScale(this.originScale),this.springTop.active=!1,this.type!==R.BOARD_TYPE.SPRING&&this.type!==R.BOARD_TYPE.SPRINT||(this.springHelix.active=!0,this.springTop.active=!0,this.setSpringPos()),this.hasDiamond=!1,this.diamondList[0]){for(var s=0;s<5;s++)this.diamondList[s].active=!1;if(this.type===R.BOARD_TYPE.GIANT)for(var n=0;n<5;n++)this.diamondList[n].active=!0,this.hasDiamond=!0;else this.type!==R.BOARD_TYPE.NORMAL&&this.type!==R.BOARD_TYPE.DROP||Math.random()>.7&&(this.diamondList[2].active=R.game.initFirstBoard,R.game.initFirstBoard=!0,this.hasDiamond=!0);this.hasDiamond&&this.setDiamondPos()}},r.setDrop=function(){this.currDropFrame=0,this.posBeforeDrop.set(this.node.position)},r.effectDrop=function(){if(this.currDropFrame<R.BOARD_DROP_FRAMES){for(var i=0;i<5;i++)this.diamondList[i].active=!1;if(this.springTop.active){this.springHelix.active=!1;var t=this.springTop.position;this.springTop.setPosition(t.x,t.y-R.BOARD_DROP_STEP,t.z)}F.set(this.node.position),F.y-=R.BOARD_DROP_STEP,this.node.setPosition(F),this.setCenterPos(),this.currDropFrame++}},r.initDiamond=function(){for(var i=0;i<5;i++)this.diamondList[i]=p(this.diamondPrefab),this.node.parent.addChild(this.diamondList[i]),this.diamondList[i].active=!1},r.setDiamondPos=function(){for(var i=new a,t=0;t<5;t++)this.diamondList[t].active&&(i.set(this.node.position),i.x+=1.4*(t-2),i.y+=R.BOARD_HEIGTH,this.diamondList[t].setPosition(i))},r.hideDiamond=function(i){this.diamondList[i].active=!1},r.checkDiamond=function(i){if(this.hasDiamond){for(var t=!0,e=0;e<5;e++)this.diamondList[e].active&&(t=!1,Math.abs(i-this.diamondList[e].position.x)<=R.DIAMOND_SCORE_AREA&&(R.game.ball.playDiamondParticle(this.diamondList[e].position),this.hideDiamond(e),R.game.addScore(R.DIAMOND_SCORE)));t&&(this.hasDiamond=!1)}},r.effectDiamondRotate=function(){for(var i=0;i<5;i++){var t=this.diamondList[i].eulerAngles;this.diamondList[i].eulerAngles=new a(t.x,t.y+R.DIAMOND_ROTATE_STEP_Y,t.z)}},r.initSpring=function(){this.springHelix=p(this.springHelixPrefab),this.springHelixOriginScale=this.springHelix.getScale(),this.springHelix.setScale(1.5,1,1.5),this.node.parent.addChild(this.springHelix),this.springHelix.active=!1,this.currSpringFrame=2*R.BOARD_SPRING_FRAMES,this.springTop=p(this.springTopPrefab),this.node.parent.addChild(this.springTop),this.springTop.active=!1;var i=this.node.position.clone();i.y+=(R.BOARD_HEIGTH+R.SPRING_HEIGHT)/2,this.springTop.setPosition(i),this.setSpringPos()},r.setSpring=function(){this.currSpringFrame=0,this.setSpringPos(),this.springHelix.setScale(1.5,1,1.5),this.springHelix.active=!0,this.springTop.active=!0},r.setSpringPos=function(){var i=this.node.position.clone();i.y+=R.BOARD_HEIGTH/2,this.springHelix.setPosition(i),(i=this.node.position.clone()).y+=(R.BOARD_HEIGTH+R.SPRING_HEIGHT)/2,this.springTop.setPosition(i)},r.effectSpring=function(){var i=this.type===R.BOARD_TYPE.SPRINT?R.SPRING_HELIX_STEP_SPIRNT:R.SPRING_HELIX_STEP,t=this.type===R.BOARD_TYPE.SPRINT?R.SPRING_TOP_STEP_SPRINT:R.SPRING_TOP_STEP,e=this.springHelix.scale,s=this.springTop.position;this.currSpringFrame<R.BOARD_SPRING_FRAMES?(this.springHelix.setScale(e.x,e.y+i,e.z),this.springTop.setPosition(s.x,s.y+t,s.z),this.currSpringFrame++):this.currSpringFrame>=R.BOARD_SPRING_FRAMES&&this.currSpringFrame<2*R.BOARD_SPRING_FRAMES?(this.springHelix.setScale(e.x,e.y-i,e.z),this.springTop.setPosition(s.x,s.y-t,s.z),this.currSpringFrame++):this.springHelix.active=!1},r.setBump=function(){this.currBumpFrame=0},r.effectBump=function(){if(this.currBumpFrame<R.BOARD_BUMP_FRAMES){var i=this.node.position;this.node.setPosition(i.x,i.y+R.BOARD_BUMP_STEP[this.currBumpFrame],i.z),this.setCenterPos(),this.currBumpFrame++}},r.initCenter=function(){this.center=p(this.centerPrefab),this.node.parent.addChild(this.center),this.center.active=!1},r.setCenterPos=function(){var i=this.node.position.clone();i.y+=R.BOARD_HEIGTH/2,this.center.setPosition(i)},r.initWave=function(){this.wave=p(this.wavePrefab),this.node.parent.addChild(this.wave),this.wave.active=!1,this.waveInner=p(this.wavePrefab),this.node.parent.addChild(this.waveInner),this.waveInner.active=!1,this.currWaveFrame=R.BOARD_WAVE_FRAMES,this.waveOriginScale.set(this.wave.scale)},r.setWave=function(){if(this.type!=R.BOARD_TYPE.GIANT){this.currWaveFrame=0;var i=this.node.position.clone();i.y+=R.WAVE_OFFSET_Y,this.wave.setPosition(i),this.wave.setScale(this.waveOriginScale.clone()),this.wave.active=!0;var t=this.wave.getComponent(c).material.passes[0],e=t.getHandle("color"),s=new l("#dadada");s.a=127,t.setUniform(e,s),this.waveInner.setPosition(i),this.waveInner.setScale(this.waveOriginScale.clone())}},r.effectWave=function(){if(this.currWaveFrame<R.BOARD_WAVE_FRAMES){if(this.currWaveFrame>=R.BOARD_WAVE_INNER_START_FRAMES){this.waveInner.active||(this.waveInner.active=!0);var i=this.waveInner.getComponent(c).material.passes[0],t=i.getHandle("color"),e=new l("#dadada");e.a=127-127*Math.sin(.05*this.currWaveFrame),i.setUniform(t,e);var s=this.waveInner.getScale();this.waveInner.setScale(s.x+R.BOARD_WAVE_INNER_STEP,s.y,s.z+R.BOARD_WAVE_INNER_STEP)}var n=this.wave.getComponent(c).material.passes[0],r=n.getHandle("color"),o=new l("#dadada");o.a=127-127*Math.sin(.1*this.currWaveFrame),n.setUniform(r,o);var a=this.waveInner.getScale();this.wave.setScale(a.x+R.BOARD_WAVE_STEP,a.y,a.z+R.BOARD_WAVE_STEP),this.currWaveFrame++}else this.wave.active=!1,this.waveInner.active=!1},r.getHeight=function(){return this.type===R.BOARD_TYPE.DROP?R.BOARD_HEIGTH*R.BOARD_HEIGTH_SCALE_DROP:R.BOARD_HEIGTH},r.getRadius=function(){return this.type===R.BOARD_TYPE.GIANT?R.BOARD_RADIUS*R.BOARD_RADIUS_SCALE_GIANT:R.BOARD_RADIUS},r.setMove=function(i){var t=g.getDiffCoeff(i,1,10);return Math.random()*t>5},r.effectMove=function(){if(this.isMoving){var i=this.node.getPosition().clone(),t=i.x;this.isMovingRight&&t<=R.SCENE_MAX_OFFSET_X?(t+=R.BOARD_MOVING_STEP,this.node.setPosition(t,i.y,i.z)):this.isMovingRight&&t>R.SCENE_MAX_OFFSET_X?this.isMovingRight=!1:!this.isMovingRight&&t>=-R.SCENE_MAX_OFFSET_X?(t-=R.BOARD_MOVING_STEP,this.node.setPosition(t,i.y,i.z)):!this.isMovingRight&&t<-R.SCENE_MAX_OFFSET_X&&(this.isMovingRight=!0),this.type===R.BOARD_TYPE.SPRING&&(this.springHelix.setPosition(this.node.position.x,this.springHelix.position.y,this.springHelix.position.z),this.springTop.setPosition(this.node.position.x,this.springTop.position.y,this.springTop.position.z)),this.setCenterPos(),this.hasDiamond&&this.setDiamondPos()}},r.revive=function(){this.isActive=!1,this.isMoving=!1,this.type===R.BOARD_TYPE.DROP&&(this.currDropFrame=R.BOARD_DROP_FRAMES,this.node.setPosition(this.posBeforeDrop))},t}(d)).prototype,"diamondPrefab",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(A.prototype,"centerPrefab",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(A.prototype,"wavePrefab",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(A.prototype,"springTopPrefab",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(A.prototype,"springHelixPrefab",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=A))||S));r._RF.pop()}}}));

System.register("chunks:///_virtual/camera-ctrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./constants.ts"],(function(i){"use strict";var t,s,o,n,e,r,a,_,c,h;return{setters:[function(i){t=i.applyDecoratedDescriptor,s=i.inheritsLoose,o=i.initializerDefineProperty,n=i.assertThisInitialized},function(i){e=i.cclegacy,r=i._decorator,a=i.Vec3,_=i.Node,c=i.Component},function(i){h=i.Constants}],execute:function(){var P,l,u,p,g;e._RF.push({},"b5204GgQaBDNqMtOdI4KDJl","camera-ctrl",void 0);var A=r.ccclass,y=r.property,M=new a;i("CameraCtrl",(P=A("CameraCtrl"),l=y(_),P((g=t((p=function(i){function t(){for(var t,s=arguments.length,e=new Array(s),r=0;r<s;r++)e[r]=arguments[r];return t=i.call.apply(i,[this].concat(e))||this,o(t,"planeNode",g,n(t)),t.preType=h.BOARD_TYPE.NORMAL,t._originPos=new a,t}s(t,i);var e=t.prototype;return e.start=function(){this._originPos.set(h.CAMERA_INIT_POS),this.setPosition(this._originPos),this.node.eulerAngles=h.CAMERA_INIT_ROT},e.setOriginPosX=function(i){this._originPos.x=i},e.setOriginPosY=function(i){this._originPos.y=i},e.update=function(){if(M.set(this.node.position),M.x!==this._originPos.x||M.y!==this._originPos.y){if(Math.abs(M.x-this._originPos.x)<=h.CAMERA_MOVE_MINI_ERR)M.x=this._originPos.x,this.setPosition(M);else{var i=this._originPos.x-M.x;M.x+=i/h.CAMERA_MOVE_X_FRAMES,this.setPosition(M)}if(M.set(this.node.position),Math.abs(M.y-this._originPos.y)<=h.CAMERA_MOVE_MINI_ERR)M.y=this._originPos.y,this.setPosition(M);else{var t=this._originPos.y-M.y;this.preType===h.BOARD_TYPE.SPRING?(M.y+=t/h.CAMERA_MOVE_Y_FRAMES_SPRING,this.setPosition(M)):(M.y+=t/h.CAMERA_MOVE_Y_FRAMES,this.setPosition(M))}}},e.reset=function(){this._originPos.set(h.CAMERA_INIT_POS),this.setPosition(this._originPos)},e.setPosition=function(i){this.node.setPosition(i);var t=i.y-27;this.planeNode.setPosition(i.x,t,-100)},t}(c)).prototype,"planeNode",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=p))||u));e._RF.pop()}}}));

System.register("chunks:///_virtual/constants.ts",["cc"],(function(_){"use strict";var A,R;return{setters:[function(_){A=_.cclegacy,R=_.Vec3}],execute:function(){var E,S,P,O;A._RF.push({},"d9bbf8RNxZP/qHAzCKjmpIn","constants",void 0),function(_){_[_.NORMAL=0]="NORMAL",_[_.SPRING=1]="SPRING",_[_.DROP=2]="DROP",_[_.GIANT=3]="GIANT",_[_.SPRINT=4]="SPRINT"}(E||(E={})),function(_){_[_.READY=1]="READY",_[_.PLAYING=2]="PLAYING",_[_.PAUSE=3]="PAUSE",_[_.OVER=4]="OVER"}(S||(S={})),function(_){_.RESTART="restart",_.REVIVE="revive",_.ADDSCORE="add-score",_.DYING="dying",_.HIDETIPS="hide-tips"}(P||(P={})),function(_){_[_.JUMPUP=1]="JUMPUP",_[_.FALLDOWN=2]="FALLDOWN",_[_.SPRINT=3]="SPRINT"}(O||(O={}));var I=_("Constants",(function(){}));I.COEFF_POS_BALL=8/360,I.PLAYER_MAX_DOWN_FRAMES=40,I.MAX_SCORE=0,I.SCORE_BOARD_CENTER=2,I.SCORE_BOARD_NOT_CENTER=1,I.BOARD_INIT_POS=new R(0,10,0),I.BOARD_NUM=6,I.BOARD_NEW_INDEX=2,I.BOARD_HEIGTH=.25,I.BOARD_RADIUS=1.5,I.BOARD_HEIGTH_SCALE_DROP=.5,I.BOARD_RADIUS_SCALE_GIANT=2.8,I.BOARD_GAP=4.3,I.BOARD_GAP_SPRING=9,I.BOARD_GAP_SPRINT=192,I.BOARD_SCALE_GIANT=2.8,I.SCENE_MAX_OFFSET_X=3.5,I.BOARD_TYPE=E,I.BOARD_DROP_FRAMES=40,I.BOARD_DROP_STEP=.5,I.BOARD_RADIUS_CENTER=.35,I.BOARD_SPRING_FRAMES=10,I.BOARD_WAVE_FRAMES=16,I.BOARD_WAVE_INNER_START_FRAMES=8,I.BOARD_WAVE_INNER_STEP=.24,I.BOARD_WAVE_STEP=2.25,I.BOARD_MOVING_STEP=.03,I.SPRING_HEIGHT=.2,I.SPRING_HELIX_STEP=.5,I.SPRING_HELIX_STEP_SPIRNT=1.2,I.SPRING_TOP_STEP=.25,I.SPRING_TOP_STEP_SPRINT=.5,I.WAVE_OFFSET_Y=.065,I.CAMERA_INIT_POS=new R(0,15,22),I.CAMERA_INIT_ROT=new R(-11,0,0),I.CAMERA_MOVE_X_FRAMES=20,I.CAMERA_MOVE_Y_FRAMES=15,I.CAMERA_MOVE_Y_FRAMES_SPRING=23,I.CAMERA_MOVE_MINI_ERR=.02,I.CAMERA_OFFSET_Y=10,I.CAMERA_OFFSET_Y_SPRINT=15,I.BOARD_BUMP_FRAMES=10,I.BOARD_BUMP_STEP=[-.15,-.1,-.07,-.02,-.003,.003,.02,.07,.1,.15],I.GAME_STATE=S,I.GAME_EVENT=P,I.BALL_RADIUS=.5,I.BALL_JUMP_STATE=O,I.BALL_JUMP_FRAMES=20,I.BALL_JUMP_FRAMES_SPRING=27,I.BALL_JUMP_FRAMES_SPRINT=240,I.BALL_JUMP_STEP=[.8,.6,.5,.4,.3,.2,.15,.1,.05,.03],I.BALL_JUMP_STEP_SPRING=[1.2,.8,.6,.4,.3,.2,.15,.1,.05],I.BALL_JUMP_STEP_SPRINT=.8,I.BALL_SPRINT_STEP_Y=10,I.DIAMOND_NUM=10,I.DIAMOND_PIECE_NUM=10,I.DIAMOND_RADIUS=.3,I.DIAMOND_ROTATE_STEP_Y=1.5,I.DIAMOND_SCORE=1,I.DIAMOND_SCORE_AREA=.6,I.DIAMOND_SPRINT_SCORE_AREA=1,I.DIAMOND_SPRINT_STEP_Y=4,I.DIAMOND_START_FRAME=6,I.normalDt=1/60,A._RF.pop()}}}));

System.register("chunks:///_virtual/game.ts",["./rollupPluginModLoBabelHelpers.js","cc","./audio-manager.ts","./constants.ts","./ball.ts","./board-manager.ts","./camera-ctrl.ts","./ui-manager.ts"],(function(e){"use strict";var t,a,i,n,r,o,s,l,u,c,h,f,g,E,d,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized,r=e.createClass},function(e){o=e.cclegacy,s=e._decorator,l=e.Prefab,u=e.instantiate,c=e.Component},function(e){h=e.AudioManager},function(e){f=e.Constants},function(e){g=e.Ball},function(e){E=e.BoardManager},function(e){d=e.CameraCtrl},function(e){b=e.UIManager}],execute:function(){var m,p,A,v,M,T,_,R,G,S,y,D,C;o._RF.push({},"6b6999+5cFK4K47RCoawnB4","game",void 0);var V=s.ccclass,P=s.property;e("Game",(m=V("Game"),p=P(l),A=P(E),v=P(d),M=P(b),T=P(h),m((G=t((R=function(e){function t(){for(var t,a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,i(t,"ballPref",G,n(t)),i(t,"boardManager",S,n(t)),i(t,"cameraCtrl",y,n(t)),i(t,"uiManager",D,n(t)),i(t,"audioManager",C,n(t)),t.initFirstBoard=!1,t.state=f.GAME_STATE.READY,t.score=0,t.hasRevive=!1,t._ball=null,t}a(t,e);var o=t.prototype;return o.__preload=function(){f.game=this},o.onLoad=function(){if(!this.ballPref)return console.log("There is no ball!!"),void(this.enabled=!1);var e=u(this.ballPref);e.parent=this.node.parent,this._ball=e.getComponent(g)},o.start=function(){this.node.on(f.GAME_EVENT.RESTART,this.gameStart,this),this.node.on(f.GAME_EVENT.REVIVE,this.gameRevive,this)},o.onDestroy=function(){this.node.off(f.GAME_EVENT.RESTART,this.gameStart,this),this.node.off(f.GAME_EVENT.REVIVE,this.gameRevive,this)},o.resetGame=function(){this.state=f.GAME_STATE.READY,this._ball.reset(),this.cameraCtrl.reset(),this.boardManager.reset(),this.uiManager.showDialog(!0)},o.gameStart=function(){this.audioManager.playSound(),this.uiManager.showDialog(!1),this.state=f.GAME_STATE.PLAYING,this.hasRevive=!1,this.score=0},o.gameDie=function(){var e=this;this.audioManager.playSound(!1),this.state=f.GAME_STATE.PAUSE,this.hasRevive?this.gameOver():this.node.emit(f.GAME_EVENT.DYING,(function(){e.gameOver()}))},o.gameOver=function(){this.state=f.GAME_STATE.OVER,this.audioManager.playSound(!1),this.resetGame()},o.gameRevive=function(){var e=this;this.hasRevive=!0,this.state=f.GAME_STATE.READY,this.ball.revive(),this.scheduleOnce((function(){e.audioManager.playSound(),e.state=f.GAME_STATE.PLAYING}),1)},o.addScore=function(e){this.score+=e,this.node.emit(f.GAME_EVENT.ADDSCORE,this.score)},r(t,[{key:"ball",get:function(){return this._ball}}]),t}(c)).prototype,"ballPref",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(R.prototype,"boardManager",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=t(R.prototype,"cameraCtrl",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(R.prototype,"uiManager",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(R.prototype,"audioManager",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=R))||_));o._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./audio-manager.ts","./constants.ts","./utils.ts","./pool-manager.ts","./ball.ts","./board-manager.ts","./board.ts","./camera-ctrl.ts","./ui-manager.ts","./game.ts","./migrate-canvas.ts","./update-value-label.ts","./revive.ts","./page-result.ts","./page-start.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/migrate-canvas.ts",["cc"],(function(){"use strict";var e,n,t,i,r,o,a;return{setters:[function(c){e=c.cclegacy,n=c.director,t=c.Director,i=c.Canvas,r=c.Camera,o=c.game,a=c.Node}],execute:function(){e._RF.push({},"15efaXh4kNGWID7GHZTjmvN","migrate-canvas",void 0);var c=1048575;function l(e,n){for(var t=0,i=e.children.length;t<i;t++)e.children[t].layer=n,l(e.children[t],n)}n.on(t.EVENT_AFTER_SCENE_LAUNCH,(function(){var e,t,a,s=null==(e=n.getScene())?void 0:e.children,m=null==(t=n.getScene())?void 0:t.getComponentsInChildren(i);if(!(m.length<=1)){m=m.filter((function(e){return!!e.cameraComponent}));var v=null==(a=n.getScene())?void 0:a.getComponentsInChildren(r),u=0;v.forEach((function(e){return u|=e.visibility&c}));for(var p=[],f=0,h=s.length;f<h;f++){var C=s[f];if(o.isPersistRootNode(C)){var d=C.getComponentsInChildren(i);0!==d.length&&p.push.apply(p,d.filter((function(e){return!!e.cameraComponent})))}}p.forEach((function(e){if(m.find((function(n){return n!==e&&n.cameraComponent.visibility&e.cameraComponent.visibility&c}))){var n=~u,t=n&~(n-1);e.cameraComponent.visibility=t|4293918720&e.cameraComponent.visibility,l(e.node,t),u|=n}}))}}));var s=a.prototype.setParent;function m(e){var n=0,t=e.getComponent(i);return t&&t.cameraComponent?n=t.cameraComponent.visibility&t.node.layer?t.node.layer:t.cameraComponent.visibility&~(t.cameraComponent.visibility-1):(e.parent&&(n=m(e.parent)),n)}a.prototype.setParent=function(e,n){if(s.call(this,e,n),e){var t=m(this);t&&(this.layer=t,l(this,t))}},e._RF.pop()}}}));

System.register("chunks:///_virtual/page-result.ts",["./rollupPluginModLoBabelHelpers.js","cc","./constants.ts","./update-value-label.ts","./revive.ts"],(function(e){"use strict";var t,i,s,n,r,o,a,l,u,c,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,s=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){r=e.cclegacy,o=e._decorator,a=e.Node,l=e.Component},function(e){u=e.Constants},function(e){c=e.UpdateValueLabel},function(e){h=e.Revive}],execute:function(){var p,g,f,d,b,T,E,y,v,m,P;r._RF.push({},"31b007MqixM3YyJROFsTMEh","page-result",void 0);var D=o.ccclass,w=o.property;e("PageResult",(p=D("PageResult"),g=w({type:c}),f=w(a),d=w(a),b=w(a),p((y=t((E=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,s(t,"scoreLabel",y,n(t)),t.targetProgress=0,s(t,"nodeTips1",v,n(t)),s(t,"nodeTips2",m,n(t)),s(t,"result",P,n(t)),t}i(t,e);var r=t.prototype;return r.init=function(){this.targetProgress=0,this.scoreLabel.playUpdateValue(this.targetProgress,this.targetProgress,0),this.scoreLabel.isPlaying=!1},r.onEnable=function(){u.game.node.on(u.GAME_EVENT.HIDETIPS,this.hideTips,this),u.game.node.on(u.GAME_EVENT.ADDSCORE,this.addScore,this),u.game.node.on(u.GAME_EVENT.DYING,this.gameDie,this),this.showTips(!0),this.showResult(!1),this.init()},r.start=function(){this.result.getComponent(h).pageResult=this},r.onDisable=function(){u.game.node.off(u.GAME_EVENT.HIDETIPS,this.hideTips,this),u.game.node.off(u.GAME_EVENT.ADDSCORE,this.addScore,this)},r.addScore=function(e){this.targetProgress=e;var t=Number(this.scoreLabel.string);this.scoreLabel.playUpdateValue(t,this.targetProgress,(this.targetProgress-t)/20)},r.gameDie=function(){this.showTips(!1),this.showResult(!0)},r.showTips=function(e){this.nodeTips1.active=e,this.nodeTips2.active=e},r.hideTips=function(){this.showTips(!1)},r.showResult=function(e){this.result.active=e},t}(l)).prototype,"scoreLabel",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(E.prototype,"nodeTips1",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=t(E.prototype,"nodeTips2",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(E.prototype,"result",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=E))||T));r._RF.pop()}}}));

System.register("chunks:///_virtual/page-start.ts",["./rollupPluginModLoBabelHelpers.js","cc","./constants.ts"],(function(t){"use strict";var e,n,r,a,o;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,r=t._decorator,a=t.Component},function(t){o=t.Constants}],execute:function(){var s;n._RF.push({},"75579oVThhNcJN3jNLu42YC","page-start",void 0);var c=r.ccclass;r.property,t("PageStart",c("PageStart")(s=function(t){function n(){return t.apply(this,arguments)||this}return e(n,t),n.prototype.gameStart=function(){o.game.node.emit(o.GAME_EVENT.RESTART),o.game.audioManager.playClip()},n}(a))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/pool-manager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var o,e,n,i,r;return{setters:[function(t){o=t.createClass},function(t){e=t.cclegacy,n=t._decorator,i=t.instantiate,r=t.NodePool}],execute:function(){var a;e._RF.push({},"f92c3xOcsdMEKh7W/84QPrD","pool-manager",void 0);var c=n.ccclass;n.property,t("PoolManager",c("PoolManager")(a=function(){function t(){this.dictPool={},this.dictPrefab={}}var e=t.prototype;return e.getNode=function(t,o){var e=t.data.name;this.dictPrefab[e]=t;var n=null;if(this.dictPool.hasOwnProperty(e)){var a=this.dictPool[e];n=a.size()>0?a.get():i(t)}else{var c=new r;this.dictPool[e]=c,n=i(t)}return n.parent=o,n},e.putNode=function(t){var o=t.name,e=null;this.dictPool.hasOwnProperty(o)?e=this.dictPool[o]:(e=new r,this.dictPool[o]=e),e.put(t)},e.clearPool=function(t){this.dictPool.hasOwnProperty(t)&&this.dictPool[t].clear()},o(t,null,[{key:"instance",get:function(){return this._instance||(this._instance=new t),this._instance}}]),t}())||a);e._RF.pop()}}}));

System.register("chunks:///_virtual/revive.ts",["./rollupPluginModLoBabelHelpers.js","cc","./constants.ts"],(function(e){"use strict";var n,t,i,o,r,s,l,a,u,c,p;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,s=e._decorator,l=e.WidgetComponent,a=e.Label,u=e.SpriteComponent,c=e.Component},function(e){p=e.Constants}],execute:function(){var g,h,b,f,w,m,C,v,y,D,L,R,d;r._RF.push({},"37e87RwLXtA5LwGn6Zuq48u","revive",void 0);var M=s.ccclass,E=s.property;e("Revive",(g=M("Revive"),h=E(l),b=E(a),f=E({type:a}),w=E({type:a}),m=E(u),g((y=n((v=function(e){function n(){for(var n,t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];return(n=e.call.apply(e,[this].concat(r))||this).closeCb=null,i(n,"wgMenu",y,o(n)),i(n,"historyLabel",D,o(n)),i(n,"scoreLabel",L,o(n)),i(n,"progressLabel",R,o(n)),i(n,"spCountDown",d,o(n)),n.pageResult=null,n}t(n,e);var r=n.prototype;return r.onEnable=function(){this.show()},r.show=function(){var e=p.game.score;this.scoreLabel.string=e.toString(),p.MAX_SCORE<e&&(p.MAX_SCORE=e),this.historyLabel.string=p.MAX_SCORE.toString(),this.countDownTime=5,this.progressLabel.string=this.countDownTime+"",this.currentTime=0,this.spCountDown.fillRange=1,this.isCountDowning=!0},r.onBtnReviveClick=function(){this.isCountDowning=!1,p.game.audioManager.playClip(),p.game.node.emit(p.GAME_EVENT.REVIVE),this.pageResult.showResult(!1)},r.onBtnSkipClick=function(){p.game.audioManager.playClip(),this.isCountDowning=!1,p.game.gameOver()},r.update=function(e){if(this.isCountDowning){this.currentTime+=e;var n=this.countDownTime-this.currentTime;this.progressLabel.string=Math.ceil(n)+"",n<=0&&(n=0,this.isCountDowning=!1,this.onBtnSkipClick());var t=n/this.countDownTime;this.spCountDown.fillRange=t}},n}(c)).prototype,"wgMenu",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=n(v.prototype,"historyLabel",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=n(v.prototype,"scoreLabel",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=n(v.prototype,"progressLabel",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=n(v.prototype,"spCountDown",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=v))||C));r._RF.pop()}}}));

System.register("chunks:///_virtual/ui-manager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./constants.ts"],(function(t){"use strict";var e,n,r,a,i,o,u,c,s;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,r=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){i=t.cclegacy,o=t._decorator,u=t.Node,c=t.Component},function(t){s=t.Constants}],execute:function(){var l,p,g,f,h,v,y;i._RF.push({},"4becfUEfe1C2prK7h8zxNvz","ui-manager",void 0);var b=o.ccclass,d=o.property;t("UIManager",(l=b("UIManager"),p=d(u),g=d(u),l((v=e((h=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i))||this,r(e,"pageStart",v,a(e)),r(e,"pageResult",y,a(e)),e}n(e,t);var i=e.prototype;return i.onLoad=function(){s.game.uiManager=this},i.start=function(){this.pageResult.active=!1},i.showDialog=function(t){this.pageResult.active=!t,this.pageStart.active=t},e}(c)).prototype,"pageStart",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=e(h.prototype,"pageResult",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=h))||f));i._RF.pop()}}}));

System.register("chunks:///_virtual/update-value-label.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var i,a,s,e;return{setters:[function(t){i=t.inheritsLoose},function(t){a=t.cclegacy,s=t._decorator,e=t.Label}],execute:function(){var r;a._RF.push({},"02566VN0PhN8o7NqZg0WyFs","update-value-label",void 0);var n=s.ccclass;s.property,t("UpdateValueLabel",n("UpdateValueLabel")(r=function(t){function a(){for(var i,a=arguments.length,s=new Array(a),e=0;e<a;e++)s[e]=arguments[e];return(i=t.call.apply(t,[this].concat(s))||this).isPlaying=!1,i.startVal=0,i.endVal=0,i.diffVal=0,i.currTime=0,i.changingTime=0,i}i(a,t);var s=a.prototype;return s.start=function(){},s.playUpdateValue=function(t,i,a){this.startVal=t,this.endVal=i,this.diffVal=this.endVal-this.startVal,this.currTime=0,this.changingTime=a,this.string=t.toString(),this.isPlaying=!0},s.update=function(t){if(this.isPlaying){if(this.currTime<this.changingTime){this.currTime+=t;var i=this.startVal+parseInt((this.currTime/this.changingTime*this.diffVal).toString());return i<this.startVal?i=this.startVal:i>this.endVal&&(i=this.endVal),void(this.string=""+i)}this.string=""+this.endVal,this.isPlaying=!1}},a}(e))||r);a._RF.pop()}}}));

System.register("chunks:///_virtual/utils.ts",["cc"],(function(t){"use strict";var e,r;return{setters:[function(t){e=t.cclegacy,r=t._decorator}],execute:function(){e._RF.push({},"dddce/2a/tOSLUiRKNMAQVd","utils",void 0);r.ccclass,r.property,t("utils",{getDiffCoeff:function(t,e,r){return(r*t+1)/(1*t+((r+1)/e-1))},getRandomInt:function(t,e){var r=Math.random()*(e-t+1)+t;return Math.floor(r)}});e._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});